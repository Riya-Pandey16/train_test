{"version":3,"file":"js/37.d8efb712.js","mappings":"ibAqCA,MAAMA,GAASC,EAAAA,EAAAA,IAAI,MACbC,GAAQD,EAAAA,EAAAA,IAAI,IACZE,GAAUF,EAAAA,EAAAA,IAAI,IACdG,GAAOH,EAAAA,EAAAA,IAAI,IACXI,GAAWJ,EAAAA,EAAAA,IAAI,IAEfK,EAAUC,IACdF,EAASG,MAAMC,KAAK,KAAI,IAAIC,MAAOC,yBAAyBJ,IAAM,EAG9DK,EAAgBA,KAChBZ,EAAOQ,OACTR,EAAOQ,MAAMK,aAGfb,EAAOQ,OAAQM,EAAAA,EAAAA,IAAG,wBAAyB,CACzCC,WAAY,CAAC,aACbC,KAAM,CAAEd,MAAOA,EAAMM,SAGvBR,EAAOQ,MAAMS,GAAG,WAAW,KACzBX,EAAO,2BAA2B,IAGpCN,EAAOQ,MAAMS,GAAG,cAAc,KAC5BX,EAAO,iBAAiB,IAG1BN,EAAOQ,MAAMS,GAAG,mBAAoBC,IAClCZ,EAAO,mBAAmBY,EAAKC,WAAa,cAAcD,EAAKE,MAAQ,WAAW,IAGpFpB,EAAOQ,MAAMS,GAAG,SAAUI,IACxBf,EAAO,oBAAoBe,IAAM,IAGnCrB,EAAOQ,MAAMS,GAAG,iBAAkBI,IAChCf,EAAO,oBAAoBe,EAAIlB,UAAU,GACzC,EAGEmB,EAAWA,KACVtB,EAAOQ,OAAOI,IACnBZ,EAAOQ,MAAMe,KAAK,YAAa,CAAEnB,KAAMA,EAAKI,QAC5CF,EAAO,kBAAkBF,EAAKI,QAAQ,EAGlCgB,EAAcA,KACbxB,EAAOQ,QACZR,EAAOQ,MAAMe,KAAK,eAAgB,CAChCnB,KAAMA,EAAKI,MACXY,KAAMjB,EAAQK,QAEhBF,EAAO,oBAAoBH,EAAQK,SACnCL,EAAQK,MAAQ,GAAE,EAGdiB,EAAaC,UACjB,MAAMC,EAAOC,EAAMC,OAAOC,MAAM,GAChC,IAAKH,EAAM,OAEX,MAAMI,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQN,GAExB,MAAMO,QAAYC,MAAM,wCAAyC,CAC/DC,OAAQ,OACRC,QAAS,CACPC,cAAe,UAAUpC,EAAMM,SAEjC+B,KAAMR,IAGFb,QAAagB,EAAIM,OACnBtB,EAAKuB,KACPnC,EAAO,qBAAqBY,EAAKuB,OAEjCzC,EAAOQ,MAAMe,KAAK,eAAgB,CAChCnB,KAAMA,EAAKI,MACXkC,SAAUxB,EAAKuB,IACfE,UAAWhB,EAAKiB,QAGlBtC,EAAO,oBAAoBY,EAAK2B,OAAS,kBAC3C,E,OAGFC,EAAAA,EAAAA,KAAgB,KACV9C,EAAOQ,OAAOR,EAAOQ,MAAMK,YAAY,I,wiCCtH7C,MAAMkC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://frontend/./src/views/SocketTest.vue","webpack://frontend/./src/views/SocketTest.vue?5e95"],"sourcesContent":["<template>\r\n  <div class=\"p-4\">\r\n    <h2 class=\"text-xl font-bold mb-4\">Socket.IO Test Page</h2>\r\n\r\n    <!-- Token Input -->\r\n    <input v-model=\"token\" placeholder=\"JWT Token\" class=\"border p-2 mb-2 w-full\" />\r\n\r\n    <!-- Room Join -->\r\n    <div class=\"flex gap-2 mb-2\">\r\n      <input v-model=\"room\" placeholder=\"Room ID\" class=\"border p-2 flex-1\" />\r\n      <button @click=\"joinRoom\" class=\"bg-blue-500 text-white px-4 py-2 rounded\">Join</button>\r\n    </div>\r\n\r\n    <!-- Message Input -->\r\n    <div class=\"flex gap-2 mb-2\">\r\n      <input v-model=\"message\" placeholder=\"Type a message\" class=\"border p-2 flex-1\" />\r\n      <button @click=\"sendMessage\" class=\"bg-green-500 text-white px-4 py-2 rounded\">Send</button>\r\n    </div>\r\n\r\n    <!-- File Upload -->\r\n    <div class=\"mb-2\">\r\n      <input type=\"file\" @change=\"uploadFile\" />\r\n    </div>\r\n\r\n    <!-- Messages -->\r\n    <div class=\"bg-gray-100 p-2 h-64 overflow-y-scroll border rounded\">\r\n      <div v-for=\"(msg, index) in messages\" :key=\"index\" class=\"mb-2\">\r\n        <pre class=\"text-sm\">{{ msg }}</pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onBeforeUnmount } from 'vue'\r\nimport { io } from 'socket.io-client'\r\n\r\nconst socket = ref(null)\r\nconst token = ref('')\r\nconst message = ref('')\r\nconst room = ref('')\r\nconst messages = ref([])\r\n\r\nconst addLog = (msg) => {\r\n  messages.value.push(`[${new Date().toLocaleTimeString()}] ${msg}`)\r\n}\r\n\r\nconst connectSocket = () => {\r\n  if (socket.value) {\r\n    socket.value.disconnect()\r\n  }\r\n\r\n  socket.value = io('http://localhost:5000', {\r\n    transports: ['websocket'],\r\n    auth: { token: token.value }\r\n  })\r\n\r\n  socket.value.on('connect', () => {\r\n    addLog('✅ Connected to socket.io')\r\n  })\r\n\r\n  socket.value.on('disconnect', () => {\r\n    addLog('❌ Disconnected')\r\n  })\r\n\r\n  socket.value.on('receive_message', (data) => {\r\n    addLog(`📩 Message from ${data.sender_id || 'unknown'}: ${data.text || '[file]'}`)\r\n  })\r\n\r\n  socket.value.on('error', (err) => {\r\n    addLog(`⚠️ Socket error: ${err}`)\r\n  })\r\n\r\n  socket.value.on('connect_error', (err) => {\r\n    addLog(`❌ Connect error: ${err.message}`)\r\n  })\r\n}\r\n\r\nconst joinRoom = () => {\r\n  if (!socket.value) connectSocket()\r\n  socket.value.emit('join_room', { room: room.value })\r\n  addLog(`➡️ Joined room ${room.value}`)\r\n}\r\n\r\nconst sendMessage = () => {\r\n  if (!socket.value) return\r\n  socket.value.emit('send_message', {\r\n    room: room.value,\r\n    text: message.value\r\n  })\r\n  addLog(`📤 Sent message: ${message.value}`)\r\n  message.value = ''\r\n}\r\n\r\nconst uploadFile = async (event) => {\r\n  const file = event.target.files[0]\r\n  if (!file) return\r\n\r\n  const formData = new FormData()\r\n  formData.append('file', file)\r\n\r\n  const res = await fetch('http://localhost:5000/api/chat/upload', {\r\n    method: 'POST',\r\n    headers: {\r\n      Authorization: `Bearer ${token.value}`\r\n    },\r\n    body: formData\r\n  })\r\n\r\n  const data = await res.json()\r\n  if (data.url) {\r\n    addLog(`📎 File uploaded: ${data.url}`)\r\n    // Send as message\r\n    socket.value.emit('send_message', {\r\n      room: room.value,\r\n      file_url: data.url,\r\n      file_name: file.name\r\n    })\r\n  } else {\r\n    addLog(`❌ Upload failed: ${data.error || 'Unknown error'}`)\r\n  }\r\n}\r\n\r\nonBeforeUnmount(() => {\r\n  if (socket.value) socket.value.disconnect()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ninput[type=\"file\"] {\r\n  border: 1px solid #ccc;\r\n  padding: 6px;\r\n}\r\n</style>\r\n","import script from \"./SocketTest.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SocketTest.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SocketTest.vue?vue&type=style&index=0&id=555022f6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-555022f6\"]])\n\nexport default __exports__"],"names":["socket","ref","token","message","room","messages","addLog","msg","value","push","Date","toLocaleTimeString","connectSocket","disconnect","io","transports","auth","on","data","sender_id","text","err","joinRoom","emit","sendMessage","uploadFile","async","file","event","target","files","formData","FormData","append","res","fetch","method","headers","Authorization","body","json","url","file_url","file_name","name","error","onBeforeUnmount","__exports__"],"sourceRoot":""}