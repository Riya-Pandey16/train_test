"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[966],{348:function(e,t,o){o.r(t),o.d(t,{default:function(){return O}});o(4114),o(8111),o(2489),o(116),o(4979);var r=o(6768),s=o(4232),a=o(5130),n=o(144),i=o(1714);const l={class:"sidebar"},c=["onClick"],u=["src"],d={key:0,class:"chat-area"},p={class:"chat-header"},m=["src"],h={class:"status"},f=["onContextmenu"],k={key:0},v=["href"],g={key:1},y={class:"timestamp"},E={class:"reactions"},_=["onClick"],L={class:"chat-input"},w=["onKeyup"],b={key:1,class:"emoji-picker"},C=["onClick"],S={key:1,class:"no-user"},R="/default-avatar.png";var I={__name:"MsgView",setup(e){const t=(0,i.io)(window.location.origin,{path:"/socket.io",transportOptions:{polling:{extraHeaders:{Authorization:`Bearer ${localStorage.getItem("token")}`}}}}),o=(0,n.KR)([]),I=(0,n.KR)([]),T=(0,n.KR)(""),A=(0,n.KR)(""),O=(0,n.KR)(null),P=(0,n.KR)(!1),U=(0,n.KR)(!1),D=(0,n.KR)(null),N=(0,n.Kh)({id:0,name:""}),X=["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ˜¢","ðŸ˜¡","ðŸ‘","ðŸ‘Ž","â¤ï¸","ðŸŽ‰","ðŸ™"],F=(0,n.KR)(!1),x=(0,n.Kh)({msg:null,x:0,y:0}),$=(0,n.KR)(!1),j=()=>{$.value=!$.value,document.documentElement.classList.toggle("dark-mode",$.value),localStorage.setItem("theme",$.value?"dark":"light")},M=(0,r.EW)((()=>o.value.filter((e=>e.name.toLowerCase().includes(T.value.toLowerCase()))))),V=async()=>{const e=await fetch("/chat/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o.value=await e.json()},J=async e=>{O.value=e;const o=await fetch(`/chat/messages/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});I.value=await o.json(),t.emit("join_room",{user_id:N.id,target_id:e.id}),z()},K=async()=>{if(!A.value.trim())return;const e={content:A.value,receiver_id:O.value.id},o=await fetch("/chat/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)}),r=await o.json();I.value.push(r),t.emit("send_message",r),A.value="",z()};t.on("message_sent",(e=>{e.receiver_id!==N.id&&e.sender_id!==N.id||(I.value.push({id:e.id,content:e.content,file:e.file,sender_id:e.sender_id,receiver_id:e.receiver_id,timestamp:e.timestamp,reactions:e.reactions||[]}),z())})),t.on("receive_message",(e=>{!O.value||e.sender_id!==O.value.id&&e.receiver_id!==O.value.id||(I.value.push({id:e.id,content:e.content,file:e.file,sender_id:e.sender_id,receiver_id:e.receiver_id,timestamp:e.timestamp,reactions:e.reactions||[]}),z())}));const Y=()=>{O.value&&t.emit("typing",{to:O.value.id,from:N.id})};t.on("user_typing",(({from:e})=>{O.value?.id===e&&(P.value=!0,setTimeout((()=>P.value=!1),1500))}));const z=()=>{(0,r.dY)((()=>{D.value&&(D.value.scrollTop=D.value.scrollHeight)}))},B=async e=>{const o=e.target.files[0];if(!o||!O.value)return;const r=new FormData;r.append("file",o);try{const e=await fetch("/chat/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:r}),o=await e.json();if(!e.ok)throw new Error(`Upload failed: ${JSON.stringify(o)}`);console.log("Uploaded:",o);const s={file:o.file_url,receiver_id:O.value.id},a=await fetch("/chat/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),n=await a.json();I.value.push(n),t.emit("send_message",n),z()}catch(s){console.error("Upload error:",s)}},H=(0,n.KR)(null),Q=()=>{H.value&&H.value.click()},W=(e,t)=>{x.msg=e,x.x=t.clientX,x.y=t.clientY,F.value=!0,setTimeout((()=>F.value=!1),5e3)},q=async(e,t)=>{await fetch("/chat/react",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({message_id:e,reaction:t})});const o=I.value.find((t=>t.id===e));o&&!o.reactions.includes(t)&&o.reactions.push(t),F.value=!1},G=async(e,t)=>{await fetch(`/chat/delete/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({mode:t})}),I.value=I.value.filter((t=>t.id!==e)),F.value=!1},Z=()=>U.value=!U.value,ee=e=>{A.value+=e,U.value=!1},te=e=>new Date(e).toLocaleTimeString();return(0,r.sV)((()=>{const e=localStorage.getItem("theme");"dark"===e&&($.value=!0,document.documentElement.classList.add("dark-mode"));const t=localStorage.getItem("token"),o=JSON.parse(atob(t.split(".")[1]));N.id=o.id,N.name=o.name,V()})),(e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,s.C4)(["msg-view-container",{dark:$.value}])},[(0,r.Lk)("div",l,[(0,r.Lk)("button",{class:"theme-toggle",onClick:j},(0,s.v_)($.value?"ðŸŒ™":"â˜€ï¸"),1),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),onInput:V,placeholder:"Search users...",class:"search-bar"},null,544),[[a.Jo,T.value]]),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(M.value,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,onClick:t=>J(e),class:(0,s.C4)({active:O.value?.id===e.id})},[(0,r.Lk)("img",{src:e.profile_picture||R,class:"avatar"},null,8,u),(0,r.Lk)("span",null,(0,s.v_)(e.name),1)],10,c)))),128))])]),O.value?((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",p,[(0,r.Lk)("img",{src:O.value.profile_picture||R,class:"avatar"},null,8,m),(0,r.Lk)("h3",null,(0,s.v_)(O.value.name),1),(0,r.Lk)("div",h,(0,s.v_)(P.value?`${O.value.name} is typing...`:""),1)]),(0,r.Lk)("div",{class:"chat-messages",ref_key:"chatMessages",ref:D},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(I.value,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,s.C4)(["message",{own:e.sender_id===N.id}])},[(0,r.Lk)("div",{class:"msg-content",onContextmenu:(0,a.D$)((t=>W(e,t)),["prevent"])},[e.file?((0,r.uX)(),(0,r.CE)("div",k,[(0,r.Lk)("a",{href:e.file,target:"_blank"},"ðŸ“Ž File",8,v)])):((0,r.uX)(),(0,r.CE)("div",g,(0,s.v_)(e.content),1)),(0,r.Lk)("span",y,(0,s.v_)(te(e.timestamp)),1),(0,r.Lk)("div",E,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.reactions,((e,t)=>((0,r.uX)(),(0,r.CE)("span",{key:t},(0,s.v_)(e),1)))),128))])],40,f)],2)))),128))],512),F.value?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"context-menu",style:(0,s.Tr)({top:x.y+"px",left:x.x+"px"})},[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(X,(e=>(0,r.Lk)("div",{key:e,onClick:t=>q(x.msg.id,e)},"React "+(0,s.v_)(e),9,_))),64)),(0,r.Lk)("div",{onClick:t[1]||(t[1]=e=>G(x.msg.id,"self"))},"Delete for Me"),x.msg.sender_id===N.id?((0,r.uX)(),(0,r.CE)("div",{key:0,onClick:t[2]||(t[2]=e=>G(x.msg.id,"everyone"))},"Delete for Everyone")):(0,r.Q3)("",!0)],4)):(0,r.Q3)("",!0),(0,r.Lk)("div",L,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>A.value=e),onKeyup:(0,a.jR)((0,a.D$)(K,["exact","prevent"]),["enter"]),onInput:Y,placeholder:"Type a message..."},null,40,w),[[a.Jo,A.value]]),(0,r.Lk)("input",{type:"file",ref_key:"fileInput",ref:H,onChange:B,style:{display:"none"}},null,544),(0,r.Lk)("button",{onClick:K},"Send"),(0,r.Lk)("button",{onClick:Z},"ðŸ˜Š"),(0,r.Lk)("button",{onClick:Q},"ðŸ“Ž")]),U.value?((0,r.uX)(),(0,r.CE)("div",b,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(X,(e=>(0,r.Lk)("span",{key:e,onClick:t=>ee(e)},(0,s.v_)(e),9,C))),64))])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",S,t[4]||(t[4]=[(0,r.Lk)("p",null,"Select a user to start chatting.",-1)])))],2))}},T=o(1241);const A=(0,T.A)(I,[["__scopeId","data-v-79e06a84"]]);var O=A},655:function(e,t,o){var r=o(6955),s=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return s(e)}},1299:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var r=o(6768),s=o(4232),a=o(5130);const n={class:"session-page"},i={class:"session-grid"},l={class:"card-header"},c={class:"card-time"},u=["onClick"],d={class:"form-container"};function p(e,t,o,p,m,h){return(0,r.uX)(),(0,r.CE)("div",n,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"header-title"},"ðŸ“… Upcoming Group Sessions",-1)),(0,r.Lk)("div",i,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(m.sessions,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"session-card"},[(0,r.Lk)("div",l," ðŸ§  "+(0,s.v_)(e.topic),1),(0,r.Lk)("div",c," ðŸ•’ "+(0,s.v_)(h.formatTime(e.time)),1),(0,r.Lk)("button",{class:"join-btn",onClick:t=>h.joinSession(e)}," Join Session ",8,u)])))),128))]),(0,r.Lk)("div",d,[t[6]||(t[6]=(0,r.Lk)("h3",{class:"form-title"},"âž• Create New Session",-1)),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>h.createSession&&h.createSession(...e)),["prevent"])),class:"form-fields"},[(0,r.Lk)("div",null,[t[3]||(t[3]=(0,r.Lk)("label",{class:"form-label"},"Session Topic",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.topic=e),placeholder:"e.g., AI Study Group",required:"",class:"form-input"},null,512),[[a.Jo,m.topic]])]),(0,r.Lk)("div",null,[t[4]||(t[4]=(0,r.Lk)("label",{class:"form-label"},"Date & Time",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.time=e),type:"datetime-local",required:"",class:"form-input"},null,512),[[a.Jo,m.time]])]),t[5]||(t[5]=(0,r.Lk)("button",{type:"submit",class:"create-btn"}," âœ… Create Session ",-1))],32)])])}var m={data(){return{topic:"",time:"",sessions:[]}},mounted(){this.fetchSessions()},methods:{formatTime(e){return new Date(e).toLocaleString()},async fetchSessions(){try{const e=localStorage.getItem("token"),t=await fetch("/session/all",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch sessions");this.sessions=await t.json()}catch(e){console.error("âŒ Fetch Error:",e.message)}},async createSession(){try{const e=localStorage.getItem("token");if(!e)return void alert("âŒ You must be logged in to create a session");const t=await fetch("/session/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({topic:this.topic,time:this.time})});if(!t.ok){const e=await t.json();throw new Error(e.error||"Unknown error")}const o=await t.json();alert(`âœ… Session created: "${o.topic}" at ${this.formatTime(o.time)}`),this.topic="",this.time="",this.fetchSessions()}catch(e){alert(`âŒ Error: ${e.message}`),console.error(e)}},joinSession(e){alert(`ðŸš€ Joining "${e.topic}" at ${this.formatTime(e.time)} ðŸŽ¥`)}}},h=o(1241);const f=(0,h.A)(m,[["render",p],["__scopeId","data-v-b2e231f6"]]);var k=f},1540:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var r=o(6768);const s={class:"home-view"},a={class:"features"};function n(e,t,o,n,i,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",s,[t[4]||(t[4]=(0,r.Lk)("section",{class:"hero"},[(0,r.Lk)("h1",null,"Welcome to UniConnect"),(0,r.Lk)("p",null,"A student social platform to share knowledge, connect with peers, and grow together.")],-1)),(0,r.Lk)("section",a,[(0,r.bF)(c,{to:"/post",class:"feature-card"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("h2",null,"ðŸ“Œ Share Posts",-1),(0,r.Lk)("p",null,"Post ideas, videos, notes, and academic resources. See what others are sharing!",-1)]))),_:1}),(0,r.bF)(c,{to:"/msg",class:"feature-card"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.Lk)("h2",null,"ðŸ’¬ Message Friends",-1),(0,r.Lk)("p",null,"Chat directly with students from any year or branch and clear doubts together.",-1)]))),_:1}),(0,r.bF)(c,{to:"/sessions",class:"feature-card"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("h2",null,"ðŸ“š Join Sessions",-1),(0,r.Lk)("p",null,"Attend or host group sessions and collaborative study events.",-1)]))),_:1}),(0,r.bF)(c,{to:"/profile",class:"feature-card"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("h2",null,"ðŸ™‹ Your Profile",-1),(0,r.Lk)("p",null,"Showcase your branch, year, skills, and connect with others academically.",-1)]))),_:1})])])}var i={name:"HomeView"},l=o(1241);const c=(0,l.A)(i,[["render",n],["__scopeId","data-v-a4a78824"]]);var u=c},2588:function(e,t,o){o.r(t),o.d(t,{default:function(){return m}});var r=o(6768),s=o(5130),a=o(4232);const n={class:"register-container"},i={class:"checkbox-label"},l={key:0,class:"message"};function c(e,t,o,c,u,d){return(0,r.uX)(),(0,r.CE)("div",n,[t[11]||(t[11]=(0,r.Lk)("h2",null,"Join UniConnect",-1)),(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>d.register&&d.register(...e)),["prevent"])),class:"register-form"},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.username=e),placeholder:"Username",required:""},null,512),[[s.Jo,u.username]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.email=e),type:"email",placeholder:"Email",required:""},null,512),[[s.Jo,u.email]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.password=e),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,u.password]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>u.branch=e),required:""},t[7]||(t[7]=[(0,r.Lk)("option",{value:"",disabled:""},"Select Branch",-1),(0,r.Lk)("option",null,"CSE",-1),(0,r.Lk)("option",null,"ECE",-1),(0,r.Lk)("option",null,"ME",-1),(0,r.Lk)("option",null,"CE",-1),(0,r.Lk)("option",null,"EE",-1),(0,r.Lk)("option",null,"IT",-1),(0,r.Lk)("option",null,"other",-1)]),512),[[s.u1,u.branch]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>u.year=e),required:""},t[8]||(t[8]=[(0,r.Lk)("option",{value:"",disabled:""},"Select Your Level",-1),(0,r.Lk)("option",null,"1st Year",-1),(0,r.Lk)("option",null,"2nd Year",-1),(0,r.Lk)("option",null,"3rd Year",-1),(0,r.Lk)("option",null,"4th Year",-1),(0,r.Lk)("option",null,"other",-1),(0,r.Lk)("option",null,"Professor",-1),(0,r.Lk)("option",null,"Director",-1)]),512),[[s.u1,u.year]]),(0,r.Lk)("label",i,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>u.isAdmin=e)},null,512),[[s.lH,u.isAdmin]]),t[9]||(t[9]=(0,r.eW)(" Register as Admin (Admins can manage users and posts) "))]),t[10]||(t[10]=(0,r.Lk)("button",{type:"submit",class:"register-button"},"Register",-1)),u.message?((0,r.uX)(),(0,r.CE)("p",l,(0,a.v_)(u.message),1)):(0,r.Q3)("",!0)],32)])}o(4114);var u={data(){return{username:"",email:"",password:"",branch:"",year:"",isAdmin:!1,message:""}},methods:{async register(){if(this.username&&this.email&&this.password&&this.branch&&this.year)try{const e=await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,email:this.email,password:this.password,branch:this.branch,year:this.year,is_admin:this.isAdmin})}),t=await e.json();e.ok?(this.message="Registration successful! Redirecting to login...",setTimeout((()=>this.$router.push("/login")),2e3)):this.message=t.error||"Registration failed."}catch(e){console.error(e),this.message="Something went wrong. Try again later."}else this.message="Please fill in all fields."}}},d=o(1241);const p=(0,d.A)(u,[["render",c],["__scopeId","data-v-9a1b65fa"]]);var m=p},2603:function(e,t,o){var r=o(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},2967:function(e,t,o){var r=o(6706),s=o(34),a=o(7750),n=o(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{e=r(Object.prototype,"__proto__","set"),e(o,[]),t=o instanceof Array}catch(i){}return function(o,r){return a(o),n(r),s(o)?(t?e(o,r):o.__proto__=r,o):o}}():void 0)},3167:function(e,t,o){var r=o(4901),s=o(34),a=o(2967);e.exports=function(e,t,o){var n,i;return a&&r(n=t.constructor)&&n!==o&&s(i=n.prototype)&&i!==o.prototype&&a(e,i),e}},3506:function(e,t,o){var r=o(3925),s=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw new a("Can't set "+s(e)+" as a prototype")}},3925:function(e,t,o){var r=o(34);e.exports=function(e){return r(e)||null===e}},4979:function(e,t,o){var r=o(6518),s=o(4576),a=o(7751),n=o(6980),i=o(4913).f,l=o(9297),c=o(679),u=o(3167),d=o(2603),p=o(5002),m=o(6193),h=o(3724),f=o(6395),k="DOMException",v=a("Error"),g=a(k),y=function(){c(this,E);var e=arguments.length,t=d(e<1?void 0:arguments[0]),o=d(e<2?void 0:arguments[1],"Error"),r=new g(t,o),s=new v(t);return s.name=k,i(r,"stack",n(1,m(s.stack,1))),u(r,this,y),r},E=y.prototype=g.prototype,_="stack"in new v(k),L="stack"in new g(1,2),w=g&&h&&Object.getOwnPropertyDescriptor(s,k),b=!!w&&!(w.writable&&w.configurable),C=_&&!b&&!L;r({global:!0,constructor:!0,forced:f||C},{DOMException:C?y:g});var S=a(k),R=S.prototype;if(R.constructor!==S)for(var I in f||i(R,"constructor",n(1,S)),p)if(l(p,I)){var T=p[I],A=T.s;l(S,A)||i(S,A,n(6,T.c))}},5002:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6038:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var r=o(6768),s=o(5130),a=o(4232);const n={class:"login-container"},i={key:0,class:"error"};function l(e,t,o,l,c,u){return(0,r.uX)(),(0,r.CE)("div",n,[t[4]||(t[4]=(0,r.Lk)("h2",null,"Login",-1)),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>u.login&&u.login(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.email=e),placeholder:"email",required:""},null,512),[[s.Jo,c.email]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.password=e),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,c.password]]),t[3]||(t[3]=(0,r.Lk)("button",{type:"submit"},"Login",-1)),c.errorMessage?((0,r.uX)(),(0,r.CE)("p",i,(0,a.v_)(c.errorMessage),1)):(0,r.Q3)("",!0)],32)])}o(4114);var c={data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){try{const e=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})}),t=await e.json();if(!e.ok)return void(this.errorMessage=t.error||"Login failed");localStorage.setItem("token",t.access_token),localStorage.setItem("is_admin",t.is_admin),this.$router.push(t.is_admin?"/admin":"/home")}catch(e){console.error("Login error:",e),this.errorMessage="An error occurred while logging in."}}}},u=o(1241);const d=(0,u.A)(c,[["render",l],["__scopeId","data-v-1f325864"]]);var p=d},6193:function(e,t,o){var r=o(9504),s=Error,a=r("".replace),n=function(e){return String(new s(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,l=i.test(n);e.exports=function(e,t){if(l&&"string"==typeof e&&!s.prepareStackTrace)while(t--)e=a(e,i,"");return e}},6674:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var r=o(6768),s=o(5130),a=o(4232);const n={class:"post-page"},i={class:"search-bar"},l={class:"post-feed"},c={class:"post-header"},u={class:"meta"},d=["onClick"],p={class:"post-content"},m={key:0},h=["href"],f={key:1},k={key:2},v={key:0},g=["src"],y={key:1},E=["href"],_={key:0};function L(e,t,o,L,w,b){return(0,r.uX)(),(0,r.CE)("div",n,[t[10]||(t[10]=(0,r.Lk)("h2",null,"ðŸ“¢ Share Your Ideas / Notes / Videos",-1)),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>b.submitPost&&b.submitPost(...e)),["prevent"])),class:"post-form"},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>w.newPost.title=e),type:"text",placeholder:"Enter post title",required:""},null,512),[[s.Jo,w.newPost.title]]),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>w.newPost.content=e),placeholder:"Write your idea, note, or video link here...",required:""},null,512),[[s.Jo,w.newPost.content]]),(0,r.Lk)("input",{type:"file",onChange:t[2]||(t[2]=(...e)=>b.handleFileUpload&&b.handleFileUpload(...e)),accept:"image/*,application/pdf,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation"},null,32),t[5]||(t[5]=(0,r.Lk)("button",{type:"submit"},"Post",-1))],32),(0,r.Lk)("div",i,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>w.searchQuery=e),type:"text",placeholder:"ðŸ” Search posts"},null,512),[[s.Jo,w.searchQuery]])]),(0,r.Lk)("div",l,[t[9]||(t[9]=(0,r.Lk)("h3",null,"ðŸ“ Recent Posts",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(b.filteredPosts,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"post-card",key:e.id},[(0,r.Lk)("div",c,[(0,r.Lk)("strong",null,(0,a.v_)(e.author.name),1),(0,r.Lk)("span",u,(0,a.v_)(e.author.branch)+", Year "+(0,a.v_)(e.author.year),1),w.currentUser.id&&(e.user_id===w.currentUser.id||w.currentUser.is_admin)?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t=>b.deletePost(e.id),class:"delete-btn"}," ðŸ—‘ï¸ Delete ",8,d)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",p,[(0,r.Lk)("h4",null,(0,a.v_)(e.title),1),b.isYouTubeLink(e.content)?((0,r.uX)(),(0,r.CE)("p",m,[t[6]||(t[6]=(0,r.eW)(" ðŸ“¹ ")),(0,r.Lk)("a",{href:e.content,target:"_blank"},(0,a.v_)(e.content),9,h)])):((0,r.uX)(),(0,r.CE)("p",f,(0,a.v_)(e.content),1)),e.file_url?((0,r.uX)(),(0,r.CE)("div",k,[t[7]||(t[7]=(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"ðŸ“Ž Attachment:")],-1)),b.isImage(e.file_url)?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("img",{src:e.file_url,alt:"Uploaded image",style:{"max-width":"100%","margin-top":"10px"}},null,8,g)])):((0,r.uX)(),(0,r.CE)("div",y,[(0,r.Lk)("a",{href:e.file_url,target:"_blank"},"ðŸ“„ View File",8,E)]))])):(0,r.Q3)("",!0),(0,r.Lk)("small",null,(0,a.v_)(b.formatTimestamp(e.timestamp)),1)])])))),128)),0===b.filteredPosts.length?((0,r.uX)(),(0,r.CE)("div",_,t[8]||(t[8]=[(0,r.Lk)("p",null,"No posts found matching your search.",-1)]))):(0,r.Q3)("",!0)])])}o(8111),o(2489);var w={name:"PostView",data(){return{currentUser:{},searchQuery:"",newPost:{title:"",content:""},selectedFile:null,posts:[],loading:!1,error:null}},computed:{filteredPosts(){const e=this.searchQuery.toLowerCase();return this.posts.filter((t=>t.title.toLowerCase().includes(e)||t.content.toLowerCase().includes(e)||t.author.name.toLowerCase().includes(e)))}},methods:{getAuthHeader(){const e=localStorage.getItem("token");return{Authorization:`Bearer ${e}`}},async fetchPosts(){this.loading=!0,this.error=null;try{const e=await fetch("/posts/",{method:"GET",headers:this.getAuthHeader()});if(!e.ok)throw new Error("Failed to fetch posts");this.posts=await e.json()}catch(e){this.error=e.message}finally{this.loading=!1}},async submitPost(){const e=new FormData;e.append("title",this.newPost.title),e.append("content",this.newPost.content),this.selectedFile&&e.append("file",this.selectedFile);try{const t=await fetch("/posts/",{method:"POST",headers:this.getAuthHeader(),body:e});if(!t.ok)throw new Error("Failed to submit post");await this.fetchPosts(),this.newPost.title="",this.newPost.content="",this.selectedFile=null}catch(t){console.error(t)}},handleFileUpload(e){const t=e.target.files[0],o=10;t&&t.size>1024*o*1024?alert(`File exceeds ${o}MB limit.`):this.selectedFile=t},async deletePost(e){if(confirm("Are you sure you want to delete this post?"))try{const t=await fetch(`/posts/${e}`,{method:"DELETE",headers:this.getAuthHeader()});if(!t.ok)throw new Error("Failed to delete post");this.posts=this.posts.filter((t=>t.id!==e))}catch(t){console.error(t)}},formatTimestamp(e){const t=new Date(e);return t.toLocaleString()},isYouTubeLink(e){return e.includes("youtube.com")||e.includes("youtu.be")},isImage(e){return/\.(jpg|jpeg|png|gif|webp)$/i.test(e)}},async mounted(){try{const e=await fetch("/profile/profile/me",{headers:this.getAuthHeader()});if(!e.ok)throw new Error("Failed to fetch user");const t=await e.json();console.log("Current user:",t),this.currentUser=t}catch(e){console.error("Error fetching user profile:",e)}await this.fetchPosts()}},b=o(1241);const C=(0,b.A)(w,[["render",L],["__scopeId","data-v-cfc3d384"]]);var S=C},8059:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var r=o(6768);const s={class:"landing-container"},a={class:"landing-content"};function n(e,t){const o=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",a,[t[1]||(t[1]=(0,r.Lk)("h1",null,[(0,r.eW)("Welcome to "),(0,r.Lk)("span",{class:"highlight"},"UniConnect")],-1)),t[2]||(t[2]=(0,r.Lk)("p",{class:"subtitle"},"Where every university student finds their community",-1)),(0,r.bF)(o,{to:"/home"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("button",{class:"cta-button"},"Get Started",-1)]))),_:1})])])}var i=o(1241);const l={},c=(0,i.A)(l,[["render",n],["__scopeId","data-v-5b204249"]]);var u=c}}]);
//# sourceMappingURL=login.e6262374.js.map